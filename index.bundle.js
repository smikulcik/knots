(()=>{"use strict";var t={523:(t,e,n)=>{n.d(e,{A:()=>r});var o=n(601),i=n.n(o),s=n(314),c=n.n(s)()(i());c.push([t.id,"",""]);const r=c},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var c={};if(o)for(var r=0;r<this.length;r++){var h=this[r][0];null!=h&&(c[h]=!0)}for(var u=0;u<t.length;u++){var a=[].concat(t[u]);o&&c[a[0]]||(void 0!==s&&(void 0===a[5]||(a[1]="@layer".concat(a[5].length>0?" ".concat(a[5]):""," {").concat(a[1],"}")),a[5]=s),n&&(a[2]?(a[1]="@media ".concat(a[2]," {").concat(a[1],"}"),a[2]=n):a[2]=n),i&&(a[4]?(a[1]="@supports (".concat(a[4],") {").concat(a[1],"}"),a[4]=i):a[4]="".concat(i)),e.push(a))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var s={},c=[],r=0;r<t.length;r++){var h=t[r],u=o.base?h[0]+o.base:h[0],a=s[u]||0,l="".concat(u," ").concat(a);s[u]=a+1;var d=n(l),f={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var v=i(f,o);o.byIndex=r,e.splice(r,0,{identifier:l,updater:v,references:1})}c.push(l)}return c}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var s=o(t=t||[],i=i||{});return function(t){t=t||[];for(var c=0;c<s.length;c++){var r=n(s[c]);e[r].references--}for(var h=o(t,i),u=0;u<s.length;u++){var a=n(s[u]);0===e[a].references&&(e[a].updater(),e.splice(a,1))}s=h}}},659:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={id:o,exports:{}};return t[o](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{function t(t,e,n,o){t.beginPath(),t.arc(e.x,e.y,n,0,2*Math.PI,!1),t.fillStyle=o,t.fill()}function e(t,e,n,i,s){return o(t,[e,e,n,n],i,s)}function o(t,e,n,o){const[i,s,c,r]=e;t.beginPath(),t.moveTo(i.x,i.y),t.lineWidth=n,t.strokeStyle=o,t.bezierCurveTo(s.x,s.y,c.x,c.y,r.x,r.y),t.stroke()}function i(t){let e;if(t instanceof TouchEvent)return{x:t.changedTouches?.[0].pageX,y:t.changedTouches?.[0].pageY};if(t instanceof MouseEvent)return e=t.toElement.getBoundingClientRect(),{x:t.clientX-e.left,y:t.clientY-e.top};throw new Error("Unknown event type",t)}class s{constructor(t,e,n,o){this.x=t,this.y=e,this.color=n,this.radius=o}draw(e){t(e,{x:this.x,y:this.y},this.radius,this.color)}}function c(t){const e=a(t);return{x:t.x/e,y:t.y/e,z:(t.z||0)/e}}function r(t,e){return{x:t.x-e.x,y:t.y-e.y,z:t.z?t.z-e.z:0}}function h(t,e){return{x:t.x+e.x,y:t.y+e.y,z:t.z?t.z+e.z:0}}function u(t,e){return{x:e.x*t,y:e.y*t,z:e.z?e.z*t:0}}function a(t){return Math.sqrt(t.x*t.x+t.y*t.y+(t.z*t.z||0))}function l(t,e){return t.x===e.x&&t.y===e.y&&(t.z||0)===(e.z||0)}function d(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)+((e.z||0)-(t.z||0))*((e.z||0)-(t.z||0)))}class f{constructor(){this.vertices=[],this.cursor,this.cursorDown=!1,this.closed=!1}draw(n){for(let t=0;t<this.vertices.length-1;t++)o(n,[this.vertices[t],this.vertices[t].c1,this.vertices[t+1].c2,this.vertices[t+1]],3,"#008800"),o(n,[this.vertices[t],this.vertices[t].c1,this.vertices[t+1].c2,this.vertices[t+1]],30,"#000000"),o(n,[this.vertices[t],this.vertices[t].c1,this.vertices[t+1].c2,this.vertices[t+1]],27,"#ffffff");for(let o=0;o<this.vertices.length-1;o++)e(n,this.vertices[o].c2,this.vertices[o],1,"#333333"),e(n,this.vertices[o],this.vertices[o].c1,1,"#333333"),e(n,this.vertices[o+1].c2,this.vertices[o+1],1,"#333333"),e(n,this.vertices[o+1],this.vertices[o+1].c1,1,"#333333"),t(n,this.vertices[o],3,"#00ff00"),t(n,this.vertices[o].c1,3,"#0000ff"),t(n,this.vertices[o+1].c2,3,"#ff0000"),t(n,this.vertices[o+1],3,"#00ff00")}onmousedown(t){if(this.closed)return;const e=i(t);this.cursorDown=!0,0===this.vertices.length&&this.vertices.push({x:e.x,y:e.y,c1:{x:e.x,y:e.y},c2:{x:e.x,y:e.y}})}onmousemove(t){if(!this.closed&&(this.cursor=i(t),this.vertices.length>0)){const t=this.vertices[this.vertices.length-1];t.x=this.cursor.x,t.y=this.cursor.y,t.c1={x:this.cursor.x,y:this.cursor.y},t.c2={x:this.cursor.x,y:this.cursor.y};const e=this.vertices[this.vertices.length-2],n=this.vertices[this.vertices.length-3];if(e&&n&&!l(e,t)){let o=e.c2;l(e,e.c2)&&(o=n),e.c1=h(e,u(.5*a(r(t,e)),c(r(e,o)))),t.c2=h(t,u(a(r(e,e.c1)),c(r(e.c1,t))))}}}onmouseup(t){if(this.closed)return;const e=i(t);if(this.cursorDown=!1,this.vertices.length>1){const t=this.vertices[0],e=this.vertices[this.vertices.length-1];if(e&&d(t,e)<10)return this.closed=!0,t.c2={x:t.x,y:t.y},e.x=t.x,e.y=t.y,void(e.c1={x:e.x,y:e.y})}this.vertices.push({x:e.x,y:e.y,c1:{x:e.x,y:e.y},c2:{x:e.x,y:e.y}})}onkeyup(t){"Enter"===t.key&&(this.closed=!0)}}class v{constructor(t){this.canvas=t,this.objects=[],this.selectedObject,this.mode=1,this.cursor=new s(0,0,"red",5),t.onmousemove=t=>{const e=i(t);this.cursor.x=e.x,this.cursor.y=e.y,1===this.mode&&this.selectedObject&&this.selectedObject.onmousemove(t),2===this.mode&&this.objects.forEach((e=>{"function"==typeof e.onmousemove&&e.onmousemove(t)})),this.draw()},t.onmousedown=t=>{1===this.mode&&(void 0===this.selectedObject&&(this.selectedObject=new f,this.objects.push(this.selectedObject)),this.selectedObject.onmousedown(t)),2===this.mode&&this.objects.forEach((e=>{"function"==typeof e.onmousedown&&e.onmousedown(t)})),this.draw()},t.onmouseup=t=>{1===this.mode&&this.selectedObject&&this.selectedObject.onmouseup(t),2===this.mode&&this.objects.forEach((e=>{"function"==typeof e.onmouseup&&e.onmouseup(t)})),this.draw()},window.onkeyup=t=>{1===this.mode&&this.selectedObject&&this.selectedObject.onkeyup(t),2===this.mode&&this.objects.forEach((e=>{"function"==typeof e.onkeyup&&e.onkeyup(t)})),this.draw()},t.addEventListener("touchstart",t.onmousedown),t.addEventListener("touchend",t.onmouseup),t.addEventListener("touchmove",t.onmousemove)}draw(){var t=this.canvas.getContext("2d");t.fillStyle="#eeeeee",t.strokeStyle="#000000",t.rect(0,0,this.canvas.clientWidth,this.canvas.clientHeight),t.fill();for(const e of this.objects)e.draw(t);this.cursor.draw(t)}addObject(t){this.objects.push(t)}}const x=[{x:100,y:100,a:{n:{i:1,x:"a"},c1:{x:114.14213562373095,y:85.85786437626905},c2:{x:29.289321881345245,y:170.71067811865476}},b:{n:{i:2,x:"b"},c1:{x:29.28932188134523,y:29.28932188134526},c2:{x:114.14213562373095,y:114.14213562373095}},top:"a"},{x:150,y:100,a:{n:{i:3,x:"a"},c1:{x:157.07106781186548,y:107.07106781186548},c2:{x:135.85786437626905,y:85.85786437626905}},b:{n:{i:0,x:"b"},c1:{x:135.85786437626905,y:114.14213562373095},c2:{x:164.14213562373095,y:85.85786437626905}},top:"b"},{x:200,y:75,a:{n:{i:1,x:"b"},c1:{x:180.07610603816508,y:76.74311485495318},c2:{x:249.8097349045873,y:70.64221286261707}},b:{n:{i:3,x:"b"},c1:{x:201.7364817766693,y:84.84807753012208},c2:{x:187.84462756331487,y:6.063457289145433}},top:"b"},{x:200,y:125,a:{n:{i:2,x:"a"},c1:{x:259.77168188550473,y:130.2293445648595},c2:{x:190.03805301908255,y:124.12844257252341}},b:{n:{i:0,x:"a"},c1:{x:187.84462756331487,y:193.93654271085455},c2:{x:201.7364817766693,y:115.15192246987792}},top:"a"}];var y=n(72),p=n.n(y),m=n(825),P=n.n(m),b=n(659),w=n.n(b),g=n(56),C=n.n(g),M=n(540),j=n.n(M),z=n(113),E=n.n(z),k=n(523),S={};function T(t,e){const n=t.length,o=new Array(n*n),i=new Array(n),s=new Array(n);for(let e=0;e<n;e++)o[e]=t[e];for(let t=1;t<n;t++)for(let i=0;i<n-t;i++)o[t*n+i]={x:o[(t-1)*n+i].x*e+o[(t-1)*n+(i+1)].x*(1-e),y:o[(t-1)*n+i].y*e+o[(t-1)*n+(i+1)].y*(1-e)};for(let t=0;t<n;t++)i[t]=o[t*n+0];for(let t=n-1;t>=0;t--){const e=n-1-t;s[e]=o[t*n+e]}return[i,s]}function O(t,e){let n,o;for(let i=0;i<1;i+=.01){const s=d(t,A(e,i));(void 0===o||s<o)&&(n=i,o=s)}return n}function A(t,e){if(t.length<4)throw new Error("Need 4 points for bezier curve",t);if(e<0||e>1)throw new Error("t must be in 0, 1",e);return{x:t[0].x*Math.pow(1-e,3)+3*t[1].x*Math.pow(1-e,2)*e+3*t[2].x*(1-e)*Math.pow(e,2)+t[3].x*Math.pow(e,3),y:t[0].y*Math.pow(1-e,3)+3*t[1].y*Math.pow(1-e,2)*e+3*t[2].y*(1-e)*Math.pow(e,2)+t[3].y*Math.pow(e,3)}}function I(t,e,n,o,i,s){return[(n*i-e*s)/(t*i-o*e),(n*o-t*s)/(e*o-t*i)]}S.styleTagTransform=E(),S.setAttributes=C(),S.insert=w().bind(null,"head"),S.domAPI=P(),S.insertStyleElement=j(),p()(k.A,S),k.A&&k.A.locals&&k.A.locals;class L{constructor(t,e){this.knot=t,this.lineWidth=e,this.controlPointSelected=!1,this.selectableControlPoint=void 0,this.curvePinchPoint,this.curvePinchPointSelected=!1,this.curvePinchToCursor}onmousedown(t){void 0!==this.selectableControlPoint&&(this.controlPointSelected=!0),this.curvePinchPoint&&(this.curvePinchPointSelected=!0)}onmouseup(t){this.controlPointSelected=!1,this.curvePinchPointSelected=!1}onmousemove(t){const e=i(t);if(this.curvePinchPointSelected||(this.curvePinchPoint=function(t,e){const n=function(t,e){let n,o,i={i:0,x:"a"};do{const s=t[i.i],c=s[i.x].n,r=t[c.i],h=[s,s[i.x].c1,r[c.x].c2,r],u=O(e,h),a=A(h,u),l=d(e,a);(void 0===n||l<n)&&(o={pt:a,t:u,segment:h,start:{i:i.i,x:i.x},end:{i:c.i,x:c.x}},n=l),i=t[i.i][i.x].n}while(0!==i.i||"a"!==i.x);return o}(t,e);if(d(e,n.pt)<30)return n}(this.knot,e),this.curvePinchPoint&&(this.curvePinchToCursor=r(e,this.curvePinchPoint.pt))),this.curvePinchPointSelected&&this.curvePinchPoint){const t=this.curvePinchPoint.t;this.curvePinchPoint.pt.x=e.x-this.curvePinchToCursor.x,this.curvePinchPoint.pt.y=e.y-this.curvePinchToCursor.y;const n=this.curvePinchPoint.segment,[o,i]=I(3*Math.pow(1-t,2)*t,3*(1-t)*t*t,this.curvePinchPoint.pt.x-n[0].x*Math.pow(1-t,3)-n[3].x*Math.pow(t,3),-1*t/(1-t),1,n[2].x-t*n[1].x/(1-t)),[s,a]=I(3*Math.pow(1-t,2)*t,3*(1-t)*t*t,this.curvePinchPoint.pt.y-n[0].y*Math.pow(1-t,3)-n[3].y*Math.pow(t,3),-1*t,1,n[2].y-t*n[1].y);n[1].x=o,n[1].y=s,n[2].x=i,n[2].y=a;const l=this.knot[this.curvePinchPoint.start.i],f=this.knot[this.curvePinchPoint.start.i][this.curvePinchPoint.start.x].c2,v=h(l,u(-1*d(f,l),c(r(n[1],l))));f.x=v.x,f.y=v.y;const x=this.knot[this.curvePinchPoint.end.i],y=this.knot[this.curvePinchPoint.end.i][this.curvePinchPoint.end.x].c1,p=h(x,u(-1*d(y,x),c(r(n[2],x))));y.x=p.x,y.y=p.y}else if(this.controlPointSelected&&this.selectableControlPoint){this.selectableControlPoint.p.x=e.x,this.selectableControlPoint.p.y=e.y;const t=this.knot[this.selectableControlPoint.i],n=this.knot[this.selectableControlPoint.i][this.selectableControlPoint.x]["c1"===this.selectableControlPoint.c?"c2":"c1"],o=h(t,u(-1*d(n,t),c(r(this.selectableControlPoint.p,t))));n.x=o.x,n.y=o.y}this.selectableControlPoint=void 0;const n=[];for(const t in this.knot){const e=this.knot[t];n.push({p:e.a.c1,i:t,x:"a",c:"c1"}),n.push({p:e.a.c2,i:t,x:"a",c:"c2"}),n.push({p:e.b.c1,i:t,x:"b",c:"c1"}),n.push({p:e.b.c2,i:t,x:"b",c:"c2"})}let o;n.forEach((t=>{const n=d(t.p,e);n<30&&(void 0===o||n<o)&&(this.selectableControlPoint=t,o=n)}))}draw(n){const i=this.knot;for(const t of["bottom","top"]){let e={i:0,x:"a"},s=this.lineWidth,c=8;do{const r=i[e.i],h=r[e.x].n,u=i[h.i],a=r[e.x].c1,l=u[h.x].c2,[d,f]=T([r,a,l,u],.5);(r.top!==e.x&&"bottom"===t||r.top===e.x&&"top"===t)&&(o(n,d,s,"#000000"),o(n,d,s-3,"#ffffff")),(u.top!==h.x&&"bottom"===t||u.top===h.x&&"top"===t)&&(o(n,f,s,"#000000"),o(n,f,s-3,"#ffffff")),e=i[e.i][e.x].n,c--}while((0!==e.i||"a"!==e.x)&&c>0)}for(const o of i){const i=o.a.c1,s=o.a.c2,c=o.b.c1,r=o.b.c2;e(n,o,i,1,"#008800"),t(n,i,3,"#008800"),e(n,o,s,1,"#008800"),t(n,s,3,"#008800"),e(n,o,c,1,"#008800"),t(n,c,3,"#008800"),e(n,o,r,1,"#008800"),t(n,r,3,"#008800")}this.selectableControlPoint&&new s(this.selectableControlPoint.p.x,this.selectableControlPoint.p.y,this.controlPointSelected?"blue":"green",10).draw(n),this.curvePinchPoint&&new s(this.curvePinchPoint.pt.x,this.curvePinchPoint.pt.y,this.curvePinchPointSelected?"blue":"orange",5).draw(n)}}document.body.appendChild(function(){const t=document.createElement("canvas");return t.setAttribute("id","content"),t.width=window.innerWidth,t.height=window.innerHeight,t}()),document.body.setAttribute("style","margin: 0; overflow: hidden"),window.onload=()=>{const t=document.getElementById("content"),e=new v(t);e.addObject(new L(x,20)),e.draw()}})()})();